<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Eternal Memories</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@300;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --pink: #ff4d6d;
            --white: #ffffff;
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            overflow: hidden;
            background: #000;
            transition: background 4s ease;
            font-family: 'Montserrat', sans-serif;
            perspective: 2000px;
        }

        #flash {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: white;
            z-index: 5000;
            opacity: 0;
            pointer-events: none;
        }

        #world {
            position: relative;
            width: 100%; height: 100%;
            transform-style: preserve-3d;
        }

        /* Polaroid Cards */
        .card {
            position: absolute;
            top: 50%; left: 50%;
            width: 240px;
            background: white;
            padding: 12px 12px 40px 12px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            border-radius: 4px;
            transform-style: preserve-3d;
            transition: transform 5s cubic-bezier(0.1, 0.8, 0.2, 1), opacity 2s ease;
            opacity: 0;
            margin-left: -120px;
            margin-top: -150px;
        }

        .card img { width: 100%; height: auto; display: block; border-radius: 2px; }

        /* The Surprise Message */
        .surprise {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            text-align: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: all 2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .boom-active .surprise { opacity: 1; transform: translate(-50%, -50%) scale(1); }

        h1 {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(3rem, 15vw, 6rem);
            color: var(--pink);
            margin: 0;
            text-shadow: 0 0 30px rgba(255, 77, 109, 0.6);
        }

        p { color: white; letter-spacing: 8px; font-size: 0.9rem; margin-top: 20px; text-transform: uppercase; }

        /* Restart Button */
        #restart-btn {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 25px;
            background: transparent;
            border: 1px solid var(--pink);
            color: var(--pink);
            font-family: 'Montserrat', sans-serif;
            font-size: 0.8rem;
            letter-spacing: 3px;
            cursor: pointer;
            z-index: 3000;
            opacity: 0;
            transition: all 1s ease;
            text-transform: uppercase;
            border-radius: 50px;
        }

        #restart-btn:hover { background: var(--pink); color: white; box-shadow: 0 0 20px var(--pink); }

        /* Heart Particles */
        .heart-particle {
            position: absolute;
            color: var(--pink);
            pointer-events: none;
            z-index: 1500;
            font-size: 20px;
        }

        @media (max-width: 600px) { .card { width: 160px; margin-left: -80px; } }
    </style>
</head>
<body id="main">

    <div id="flash"></div>

    <div class="surprise">
        <h1>Forever Yours</h1>
        <p>You are my favorite memory</p>
    </div>

    <button id="restart-btn" onclick="restartJourney()">Relive the Magic</button>

    <div id="world"></div>

    <script>
        const world = document.getElementById('world');
        const flash = document.getElementById('flash');
        const body = document.getElementById('main');
        const restartBtn = document.getElementById('restart-btn');
        
        let current = 20;
        let cardElements = [];
        let heartInterval;

        function createHeart() {
            const h = document.createElement('div');
            h.className = 'heart-particle';
            h.innerHTML = 'â¤';
            h.style.left = '50vw';
            h.style.top = '50vh';
            document.body.appendChild(h);

            const destX = (Math.random() - 0.5) * window.innerWidth * 2.5;
            const destY = (Math.random() - 0.5) * window.innerHeight * 2.5;

            const animation = h.animate([
                { transform: 'translate(-50%, -50%) scale(0)', opacity: 1 },
                { transform: `translate(${destX}px, ${destY}px) scale(2) rotate(${Math.random() * 360}deg)`, opacity: 0 }
            ], {
                duration: Math.random() * 3000 + 2000,
                easing: 'cubic-bezier(0.1, 0.9, 0.2, 1)'
            });

            animation.onfinish = () => h.remove();
        }

        function spawnMemory() {
            if (current < 1) return;

            const card = document.createElement('div');
            card.className = 'card';
            const img = document.createElement('img');
            img.src = `${current}.jpeg`;
            img.onerror = () => card.remove();
            
            card.appendChild(img);
            world.appendChild(card);
            cardElements.push(card);

            card.style.transform = `translate3d(${(Math.random()-0.5)*1500}px, ${(Math.random()-0.5)*1500}px, -3000px)`;

            setTimeout(() => {
                const tx = (Math.random() - 0.5) * window.innerWidth * 0.7;
                const ty = (Math.random() - 0.5) * window.innerHeight * 0.7;
                const tz = Math.random() * 500;
                const rot = (Math.random() - 0.5) * 40;
                card.style.opacity = "1";
                card.style.transform = `translate3d(${tx}px, ${ty}px, ${tz}px) rotateZ(${rot}deg)`;
            }, 100);

            current--;
            if (current >= 1) {
                setTimeout(spawnMemory, 3800);
            } else {
                setTimeout(triggerBoom, 5500);
            }
        }

        function triggerBoom() {
            flash.style.opacity = "1";
            setTimeout(() => {
                cardElements.forEach(card => {
                    card.style.transition = "all 1.5s ease-in";
                    card.style.transform = `translate3d(${(Math.random()-0.5)*4000}px, ${(Math.random()-0.5)*4000}px, 1500px) rotateX(360deg)`;
                    card.style.opacity = "0";
                });
                body.style.background = "radial-gradient(circle, #2d0a10 0%, #000000 100%)";
                body.classList.add('boom-active');
                flash.style.opacity = "0";
                heartInterval = setInterval(createHeart, 70);
                setTimeout(() => { restartBtn.style.opacity = "1"; }, 5000);
            }, 600);
        }

        function restartJourney() {
            // Reset everything
            clearInterval(heartInterval);
            current = 20;
            cardElements = [];
            world.innerHTML = '';
            body.classList.remove('boom-active');
            body.style.background = "#000";
            restartBtn.style.opacity = "0";
            
            // Remove existing heart particles
            document.querySelectorAll('.heart-particle').forEach(h => h.remove());
            
            // Start again
            spawnMemory();
        }

        spawnMemory();
    </script>
</body>
</html>
