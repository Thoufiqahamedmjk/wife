<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Love Story | Forever</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Montserrat:wght@300&display=swap" rel="stylesheet">
    <style>
        :root {
            --pink: #ff4d6d;
            --deep-rose: #c9184a;
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            overflow: hidden;
            background: #fff;
            transition: background 3s ease;
            font-family: 'Montserrat', sans-serif;
        }

        /* The Surprise Flash */
        #flash-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: white;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
        }

        .flash-active {
            animation: flashAnim 1s ease-out forwards;
        }

        @keyframes flashAnim {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* Center Message - The Surprise */
        .center-content {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            text-align: center;
            z-index: 1000;
            width: 85%;
            max-width: 500px;
            padding: 40px 20px;
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            opacity: 0;
            visibility: hidden;
            transition: all 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            pointer-events: none;
        }

        .boom-active .center-content {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        h1 {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.5rem, 10vw, 4.5rem);
            color: var(--pink);
            margin: 0;
        }

        #special-note {
            font-size: 1.1rem;
            color: #444;
            letter-spacing: 2px;
            margin-top: 20px;
            line-height: 1.6;
            font-weight: 300;
        }

        /* Memory Cards */
        .card {
            position: absolute;
            bottom: -600px;
            width: 260px;
            background: white;
            padding: 12px 12px 40px 12px;
            box-shadow: 0 15px 45px rgba(0,0,0,0.1);
            border-radius: 4px;
            z-index: 10;
        }

        .card img { width: 100%; height: auto; display: block; border-radius: 2px; }

        @keyframes floatUpwards {
            0% { bottom: -600px; opacity: 0; transform: rotate(var(--r)); }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { bottom: 120%; opacity: 0; transform: translateX(var(--d)) rotate(calc(var(--r) + 25deg)); }
        }

        .animate { animation: floatUpwards 20s linear forwards; }

        /* Heart Rain */
        .falling-heart {
            position: absolute;
            color: var(--pink);
            z-index: 500;
            pointer-events: none;
            top: -50px;
        }

        @media (max-width: 600px) { .card { width: 170px; } }
    </style>
</head>
<body id="main-body">

    <div id="flash-overlay"></div>

    <div class="center-content">
        <h1>You are my Forever</h1>
        <div id="special-note">
            Every memory we've made is a treasure <br>
            I carry in my heart. <br>
            <b>I love you!</b>
        </div>
    </div>

    <div id="gallery"></div>

    <script>
        const gallery = document.getElementById('gallery');
        const flash = document.getElementById('flash-overlay');
        const body = document.getElementById('main-body');
        let current = 20;
        let activeStream = true;

        // Function for the heart rain after the "Boom"
        function rainHeart() {
            const h = document.createElement('div');
            h.className = 'falling-heart';
            h.innerHTML = 'â¤';
            h.style.left = Math.random() * 100 + 'vw';
            const size = (Math.random() * 25 + 15) + 'px';
            h.style.fontSize = size;
            h.style.opacity = Math.random();
            
            const duration = Math.random() * 3 + 3;
            h.style.transition = `transform ${duration}s linear, opacity ${duration}s`;
            
            document.body.appendChild(h);

            setTimeout(() => {
                h.style.transform = `translateY(110vh) rotate(${Math.random() * 360}deg)`;
                h.style.opacity = '0';
            }, 100);

            setTimeout(() => h.remove(), duration * 1000);
        }

        function triggerMagic() {
            activeStream = false;
            
            // 1. Flash
            flash.classList.add('flash-active');
            
            // 2. Clear images and change background after flash peaks
            setTimeout(() => {
                gallery.innerHTML = '';
                body.classList.add('boom-active');
                body.style.background = 'radial-gradient(circle, #ffffff 0%, #ffcbd1 100%)';
                
                // 3. Start Heart Explosion
                for(let i=0; i<80; i++) {
                    setTimeout(rainHeart, i * 60);
                }
                // Continue soft rain
                setInterval(rainHeart, 400);
            }, 500);
        }

        function spawnMemory() {
            if (!activeStream) return;

            const card = document.createElement('div');
            card.className = 'card animate';
            
            const r = (Math.random() * 30 - 15) + 'deg';
            const d = (Math.random() * 180 - 90) + 'px';
            
            // Keep center clear for the surprise
            let randomX = Math.random() > 0.5 ? (Math.random() * 20) : (Math.random() * 20 + 60);
            card.style.left = randomX + 'vw';
            
            card.style.setProperty('--r', r);
            card.style.setProperty('--d', d);

            const img = document.createElement('img');
            img.src = `${current}.jpeg`;
            img.onerror = () => card.remove();

            card.appendChild(img);
            gallery.appendChild(card);

            // If we hit the last image, wait for it to float up a bit then BOOM
            if(current === 1) {
                setTimeout(triggerMagic, 5000);
                return; // Stop spawning after 1.jpeg
            }

            current--;
            setTimeout(spawnMemory, 4000);
        }

        // Initialize the memory stream
        spawnMemory();
    </script>
</body>
</html>
